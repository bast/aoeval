include_directories(${PROJECT_SOURCE_DIR}/src)
include_directories(${PROJECT_SOURCE_DIR}/api)

set(_generated_files)
foreach(_foo RANGE 0 ${MAX_GEO_DIFF_ORDER})
    set(_generated_files ${_generated_files} ${PROJECT_BINARY_DIR}/generated/autogenerated_${_foo}_block.cpp)
    set(_generated_files ${_generated_files} ${PROJECT_BINARY_DIR}/generated/autogenerated_${_foo}_explicit.cpp)
endforeach()

set(_generated_files ${_generated_files} ${PROJECT_BINARY_DIR}/generated/ao_dispatch.cpp)

set_source_files_properties(${_generated_files} PROPERTIES GENERATED TRUE)

add_library(
    balboa
    SHARED
    Main.cpp
    Main.h
    ao_vector.cpp
    ao_vector.h
    ${_generated_files}
    )

add_dependencies(balboa generate)

install(TARGETS balboa LIBRARY DESTINATION lib)
